<?xml version="1.0" encoding="UTF-8" ?>
<feed xmls="http://www.w3.org/2005/Atom" xml:lang="en">
    <link href="{{ request.url }}" rel="self" type="application/atom+xml"></link>
    <link href="{{ request.host_url }}" rel="alternate" type="text/html" hreflang="en"></link>
    <title>Temperature Monitor for {{ host }}</title>
    <subtitle>{{ description }}</subtitle>
    <copyright>2020 Amrit Rathie | All rights reserved</copyright>
    <updated>{{ updated }}</updated>


    {% for log in logs %}
        <entry>
            {% if log.warning %}
                {% set title = "Temperature Alert for " ~ host %}
            {% else %}
                {% set title = "Temperature Log for " ~ host %}
            {% endif %}
            <title>{{ title }}</title>
            {% set alt_link = request.base_url ~ url_for('temperature', id=log._id) %}
            <link{{ {'link': alt_link, 'rel':'alternate', 'type': 'text/html', 'title': title} | xmlattr }}></link>
            <published>{{ log.created }}</published>
            <id>{{ log._id }}</id>
            <content{{ {'type': 'html', 'xml:base': alt_link} | xmlattr }}>
                {% with temps=log.temps %}
                    {% include 'content.html' %}
                {% endwith %}
            </content>
            <summary type="html">
                A sensor was read at {{ log.created }}.

                {% if log.warning %}
                    This is a warning because the temperature from the sensor was found to be high or critical.
                {% endif %}
            </summary>
        </entry>
    {% endfor %}
</feed>